
## 对象扁平化
```js
function flatten(obj) {
  let res = {}
  /*
   * @params{Any} data 数据
   * @params{String} key 键名
   */
  function _flat(data, key) {
    // 非对象类型
    if(typeof data !== 'object' || data === null){
      res[key] = data
    }else if(Array.isArray(data)){ //数组
      let len = data.length
      if(!len)return res[key] = [] // 空数组
      // 循环递归
      data.forEach((item, index) => {
        _flat(item, `${key}[${index}]`)
      })
    }else{ // 对象
      // 空对象
      if(!Object.keys(data).length && key) return res[key] = {}
      // 循环递归
      for(let i in data) {
        _flat(data[i],  key ? `${key}.${i}` : i)
      }
    }
  }
  _flat(obj, '')
  return res
}
```

```js
let obj = {
  a: {
    b: {
      c: {
        d: 1,
        e:null,
      }
    }
  },
  b: 2,
  c: [1,2,{d:{e:3}}],
  d: [],
  e: {},
}
console.log(flatten(obj))
/*
{
  'a.b.c.d': 1,
  'a.b.c.e': null,
  b: 2,
  'c[0]': 1,
  'c[1]': 2,
  'c[2].d.e': 3,
  d: [],
  e: {}
}
*/
```
