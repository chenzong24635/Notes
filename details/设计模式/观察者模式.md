#  [观察者模式 Observer-Subject](https://juejin.im/post/5cd81a20e51d453b4558d858#heading-4)
![observer](/img/observer1.png)
![observer](/img/observer.png)

观察者模式就是使用一个目标对象（subject）维持一系列依赖于它的观察者对象（observer），    
目标对象的状态发生改变时，会通知所有依赖它的观察者对象，这两者是直接关联的。

在观察者模式中，观察者(Observer)是知道被观察对象(subject)的，Subject一直保持对观察者进行记录;当Subject状态发生变化时，会给所有的observers发送一个通知函数，Observers接收到通知后通常会调用各自的更新函数。

观察者模式大多数时候是同步的，比如当事件触发，Subject就会去调用观察者的方法
```js
const Subject = (() => {
  const observers = [];
  const add = (ob) => {
    observers.push(ob);
  };
  const notify = () => {
    for (let ob of observers) {
      if (typeof ob.update === 'function') {
        ob.update();
      }
    }
  };
  return {add, notify};
})();

let subA = {
  update: () => {
    console.log('updateSubA');
  }
},
subB = {
  update: () => {
    console.log('updateSubB');
  }
};
Subject.add(subA);    //添加观察者subA
Subject.add(subB);    //添加观察者subB
Subject.notify();       //通知所有观察者
```
